var pokiDebug=!1,postRunDone=!1,theDomLoaded=!1,pokiInited=!1,gameReadyToStart=!1,requestedCanvas=!1,adblocker=!1,gameStarted=!1,updatedScreenSize=!1,startupTimeStr="",loadProgressFrac=0,fakeProgressPercentStart=80+15*Math.random();function inIframe(){return!1}function updateLoadProgress(){let e=document.getElementById("progress");e&&(e.value=Math.round(loadProgressFrac*fakeProgressPercentStart),e.max=100),loadProgressFrac>=1&&tryStartGame()}function domContentLoaded(){let e=document.getElementById("canvas");e.addEventListener("contextmenu",stopContextMenu),postRunDone||resizeCanvas(!1),window.addEventListener("blur",e=>setGameFocus(!1)),window.addEventListener("focus",e=>setGameFocus(!0)),e.onpointerdown=beginPointerDrag,e.onpointerup=endPointerDrag,theDomLoaded=!0}function beginPointerDrag(e){document.getElementById("canvas").setPointerCapture(e.pointerId)}function endPointerDrag(e){document.getElementById("canvas").releasePointerCapture(e.pointerId)}function setGameFocus(e){postRunDone&&Module.ccall("set_game_focus","v",["number"],[e])}function canBeGameGuid(e){return e&&e.match("([A-F]|[0-9]){16}")}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n].getAttribute("content");return""}function getCSSRgb(e){return`rgb(${Math.round(e[0])}, ${Math.round(e[1])}, ${Math.round(e[2])})`}window.addEventListener("DOMContentLoaded",domContentLoaded),window.addEventListener("load",function(){inIframe()&&document.addEventListener("click",e=>{let t=document.getElementById("canvas");t&&t.focus()})});let lastGradientStyleStr="",lastDeepLinkLoadFraction=0;function getGradientStr(e){let t=[0*e,162*e,255*e];return`linear-gradient(135deg, ${getCSSRgb([112*e,225*e,253*e])}, ${getCSSRgb(t)})`}function hideOverlayGradient(){document.getElementById("gradient").style.display="none"}var showedStartGameError=!1;function setPokiInited(){pokiInited=!0}function initPokiSdk(){PokiSDK.init().then(()=>{}).catch(()=>{})}function hideOverlay(){document.getElementById("play_content").style.display="none",hideOverlayGradient()}function startGame(){try{window.addEventListener("beforeunload",function(e){Module.ccall("app_terminate_if_necessary","v")}),window.addEventListener("unload",function(e){Module.ccall("app_terminate_if_necessary","v")}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState?Module.ccall("app_resume","v"):Module.ccall("app_pause","v")});try{Module.ccall("user_accepted_and_clicked","v"),Module.ccall("set_is_mobile","v",["number"],[matchMedia("(pointer:coarse)").matches])}catch(e){}gameStarted=!0,updatedScreenSize||resizeCanvas(!0)}catch(e){if(!showedStartGameError){let e=!1,t="";try{Module.asm&&(e=!0)}catch(e){}e||(t+="Could not find Module.asm"),showedStartGameError=!0}}}var pokiStopped=!0;function pokiEnsureStop(){}function pokiEnsureStart(){}var startGameAttempts=0,tryStartGameTimeout=null;function tryStartGame(){gameReadyToStart||(gameReadyToStart=!0,startGame())}function appErrorC(e,t){postRunDone?Module.ccall("app_error","v",["number","string"],[e,t]):console.error(t,e)}function simpleAppErrorC(e){appErrorC(1,e)}function simpleLogC(e){console.log(e)}function parseUrlArgument(e){let t="",n=window.location.search;if(n.length>0&&"?"==n[0]){var o=n.substr(1).split("&");for(let n=0;n<o.length;n++)if(o[n].startsWith(e+"=")){t=o[n].substr(e.length+1);break}}return t}function parseUrlArgumentInt(e){let t=parseUrlArgument(e),n=parseInt(t);return isNaN(n)?0:n}function resizeCanvas(e){let t=window.innerWidth,n=window.innerHeight,o=document.getElementById("canvas"),a=document.getElementById("canvas_border");o.width=t*window.devicePixelRatio,o.height=n*window.devicePixelRatio,a.style.marginTop="0px";let r=document.getElementById("gradient"),i=document.getElementById("webview_content");[r,i].forEach(e=>{e&&(e.style.left="0px")}),[o,r,i].forEach(e=>{e&&(e.style.width=t+"px",e.style.height=n+"px",e.style.borderRadius="0px")}),e&&gameStarted&&requestedCanvas&&(Module.ccall("update_screen_size","v",["number","number","number"],[o.width,o.height,window.devicePixelRatio]),updatedScreenSize=!0)}function stopContextMenu(e){return e.preventDefault(),!1}var Module={locateFile:function(e,t){return""==t?""+e:t+e},preRun:[function(){}],postRun:[function(){document.onfullscreenchange=function(){setTimeout(function(){if(resizeCanvas(!0),document.fullscreenElement&&gameStarted&&requestedCanvas){let e=document.getElementById("canvas");Module.ccall("update_screen_size","v",["number","number","number"],[e.width,e.height,1])}},500)},window.addEventListener("resize",e=>resizeCanvas(!0),!1),theDomLoaded&&resizeCanvas(!0),window.addEventListener("keydown",e=>{ccall("keydown_browser","v",["string"],[e.key])}),postRunDone=!0}],print:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e)},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",function(e){console.log("Context lost"),e.preventDefault(),Module.ccall("app_set_opengl_context_lost","v",["number"],[1])},!1),e.addEventListener("webglcontextrestored",function(e){console.log("Context restored"),Module.ccall("opengl_resume","v")},!1),requestedCanvas=!0,e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text){var t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t?(e=t[1],loadProgressFrac=parseInt(t[2])/parseInt(t[4])):loadProgressFrac=1,updateLoadProgress())}},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e)}},notifications=[],webViewIframe=null,storedScripts=[],webviewDomLoaded=!1,fsSyncStatus="";async function isUrlFound(e){try{return 200===(await fetch(e,{method:"HEAD",cache:"no-cache"})).status}catch(e){return!1}}function checkHintFileExist(e,t){isUrlFound(e).then(e=>{e&&Module.ccall("hint_file_exists","v",["number"],[t])})}function postStored(){for(var e=0;e<storedScripts.length;e++)webViewIframe.contentWindow.postMessage("eval:"+storedScripts[e],"*");storedScripts=[]}function onWebviewDomContentLoaded(){webviewDomLoaded=!0,postStored()}function webViewPostMessage(e){Module.ccall("app_webview_message","v",["string"],[e])}function webViewError(e,t){webViewPostMessage(`error|${e}|${t}`)}function webViewClose(){try{var e=document.getElementById("webview_content");e.style.display="none",e.contains(webViewIframe)&&(webviewDomLoaded=!1,webViewIframe.contentWindow.removeEventListener("DOMContentLoaded",onWebviewDomContentLoaded),e.removeChild(webViewIframe)),setTimeout(function(){Module.ccall("set_game_focus","v",["number"],[!0])},100)}catch(e){webViewError("unknown",e)}}function webViewOpen(e){try{let n=readLocalFile(e),o=new TextDecoder("utf-8").decode(n);null==webViewIframe&&(window.onmessage=function(e){webViewPostMessage(e.data)}),o=(o=o.replace("common.js","view_common.js")).replace("common.css","view_common.css");var t=document.getElementById("webview_content");t.style.display="block",(webViewIframe=document.createElement("iframe")).classList.add("webview"),webViewIframe.allowtransparency=!0,t.appendChild(webViewIframe),webViewIframe.contentWindow.document.open(),webviewDomLoaded=!1,webViewIframe.contentWindow.addEventListener("DOMContentLoaded",onWebviewDomContentLoaded),webViewIframe.contentWindow.document.write(o),webViewIframe.contentWindow.document.close()}catch(e){webViewError("unknown",e)}}function webViewExecuteJS(e){try{webviewDomLoaded?webViewIframe.contentWindow.postMessage("eval:"+e,"*"):storedScripts.push(e)}catch(e){webViewError("unknown",e)}}function getHostname(){let e=window.location.hostname.split(":")[0],t=lengthBytesUTF8(e)+1,n=_malloc(t);return stringToUTF8(e,n,t),n}function parseUrlArgumentString(e){let t=parseUrlArgument(e),n=lengthBytesUTF8(t)+1,o=_malloc(n);return stringToUTF8(t,o,n),o}function writeLocalFile(e,t){let n=new Uint8Array(e),o=FS.open(t,"w");FS.write(o,n,0,n.length,0),FS.close(o)}function readLocalFile(e){let t=FS.open(e,"r");FS.llseek(t,0,2);let n=t.position;FS.llseek(t,0,0);let o=new Uint8Array(n);return FS.read(t,o,0,n,0),FS.close(t),o}function resizeModal(e,t,n){let o=window.innerWidth,a=window.innerHeight,r=Math.min(.15*a,100),i=Math.min(o,n);return e.style.display="block",t.style.width=i+"px",e.style.paddingTop=r+"px",i}function fetchUrl(e,t,n){}function adInit(){setTimeout(()=>Module.ccall("ad_on_inited","v"),100)}function firebasePause(){}function firebaseResume(){}function adInterstitialLoad(){setTimeout(()=>Module.ccall("ad_interstitial_on_loaded","v",["number"],[1]),100)}function adInterstitialShow(){Module.ccall("ad_interstitial_on_showed","v",["number"],[1])}function adRewardedLoad(){setTimeout(()=>Module.ccall("ad_rewarded_on_loaded","v",["number"],[1]),100)}function adRewardedShow(){Module.ccall("ad_rewarded_on_reward","v"),Module.ccall("ad_rewarded_on_showed","v",["number"],[!0])}function firebaseDeinit(){}function currentTimeSecondsRound(){return Math.round(Date.now()/1e3)}